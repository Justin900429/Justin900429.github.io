<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">

    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--icon-->

    
    
    
        <link rel="icon" type="image/png" sizes="32x32" href="/icon.png">
    
    
        <link rel="apple-touch-icon" sizes="180x180" href="/apple_icon_128.png">
    
    
        <link rel="mask-icon" href="/apple_icon_128.png">
    


    <!-- meta -->


<title>OpenCV with Python - 3 | Justin website for sharing knowledge and getting idea.</title>


    <meta name="keywords" content="OpenCV,MachineLearning, Android, AI, Algorithm, DataStructure">




    <!-- OpenGraph -->
 
    <meta name="description" content="OpenCV with Python – 3ContentSee moreBack to series page  OpenCV with Python – 1 OpenCV with Python – 2 OpenCV with Python – 3 OpenCV with Python – 4 OpenCV with Python – 5    IntroductionIn today’s t">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenCV with Python - 3">
<meta property="og:url" content="justin900429.github.io/posts/bb761379/index.html">
<meta property="og:site_name" content="Justin website for sharing knowledge and getting idea.">
<meta property="og:description" content="OpenCV with Python – 3ContentSee moreBack to series page  OpenCV with Python – 1 OpenCV with Python – 2 OpenCV with Python – 3 OpenCV with Python – 4 OpenCV with Python – 5    IntroductionIn today’s t">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.imgur.com/68aExgZ.jpg">
<meta property="article:published_time" content="2020-08-28T13:56:25.000Z">
<meta property="article:modified_time" content="2021-01-01T02:56:23.162Z">
<meta property="article:author" content="Justin Ruan">
<meta property="article:tag" content="OpenCV,MachineLearning, Android, AI, Algorithm, DataStructure">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.imgur.com/68aExgZ.jpg">


    
<link rel="stylesheet" href="/css/style/main.css">
 



    
    
    
        <link rel="stylesheet" id="hl-default-theme" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.2/styles/atom-one-light.min.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')===-1)this.media='all'">
        
    

    

     

    <!-- custom head -->

<meta name="generator" content="Hexo 5.1.1"></head>

    <body>
        <div id="app">
            <script>
window.onscroll = () => {
    const nav = document.querySelector('.header');
    if(this.scrollY <= 10) {
        nav.style.backgroundColor = "rgba(255, 255, 255, 0)"
    } else {
        nav.style.backgroundColor = "rgba(255, 255, 255, 0.9)"
    }
};
</script>

<header class="header">
    <div class="header__left">
        <a href="/" class="button">
            <span class="logo__text">Justin&#39;s blog</span>
        </a>
    </div>
    <div class="header__right">
        
            <div class="navbar__menus">
                
                    <a href="/about/" class="navbar-menu button">Home</a>
                
                    <a href="/about/resume.pdf" class="navbar-menu button">CV</a>
                
                    <a href="/" class="navbar-menu button">Articles</a>
                
                    <a href="/tags/" class="navbar-menu button">Tags</a>
                
                    <a href="/archives/" class="navbar-menu button">Archives</a>
                
            </div>
        
        
        
    <a href="/search/" id="btn-search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24" fill="currentColor" stroke="currentColor" stroke-width="32"><path d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z"></path></svg>
    </a>


        
        

         
    <a href="#" class="button" id="b2t" aria-label="Back to Top" title="Back to Top">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M233.376 722.752L278.624 768 512 534.624 745.376 768l45.248-45.248L512 444.128zM192 352h640V288H192z" fill="currentColor"></path>
        </svg>
    </a>


        
            <a class="dropdown-icon button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width='24' height='24' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a>
            <div class="dropdown-menus" id="dropdown-menus">
                
                    <a href="/about/" class="dropdown-menu button">Home</a>
                
                    <a href="/about/resume.pdf" class="dropdown-menu button">CV</a>
                
                    <a href="/" class="dropdown-menu button">Articles</a>
                
                    <a href="/tags/" class="dropdown-menu button">Tags</a>
                
                    <a href="/archives/" class="dropdown-menu button">Archives</a>
                
            </div>
        
    </div>
</header>


            <main class="main">
    

<div class="post-title">
    <h1 class="post-title__text">
        OpenCV with Python - 3
    </h1>
    <div class="post-title__meta">
        <a href="/archives/2020/08/" class="post-meta__date button">2020-08-28</a>
        
 
        
    
    


 

 
    </div>
</div>


    <aside class="post-side">
        <div class="post-side__toc">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Content"><span class="toc-number">1.</span> <span class="toc-text">Content</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">2.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resize-and-crop"><span class="toc-number">3.</span> <span class="toc-text">Resize and crop</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Draw-on-the-image"><span class="toc-number">4.</span> <span class="toc-text">Draw on the image</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Perspective"><span class="toc-number">5.</span> <span class="toc-text">Perspective</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Join-the-image"><span class="toc-number">6.</span> <span class="toc-text">Join the image</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">7.</span> <span class="toc-text">Reference</span></a></li></ol>
        </div>
    </aside>
    <a class="btn-toc button" id="btn-toc" tabindex="0">
        <svg viewBox="0 0 1024 1024" width="32" height="32" xmlns="http://www.w3.org/2000/svg">
            <path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="currentColor"></path>
        </svg>
    </a>
    <div class="toc-menus" id="toc-menus">
        <div class="toc-title">Article Directory</div>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Content"><span class="toc-number">1.</span> <span class="toc-text">Content</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">2.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Resize-and-crop"><span class="toc-number">3.</span> <span class="toc-text">Resize and crop</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Draw-on-the-image"><span class="toc-number">4.</span> <span class="toc-text">Draw on the image</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Perspective"><span class="toc-number">5.</span> <span class="toc-text">Perspective</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Join-the-image"><span class="toc-number">6.</span> <span class="toc-text">Join the image</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">7.</span> <span class="toc-text">Reference</span></a></li></ol>
    </div>


<article class="post content-card">
    <div class="post__header"></div>
    <div class="post__content">
        <h1 id="OpenCV-with-Python-–-3"><a href="#OpenCV-with-Python-–-3" class="headerlink" title="OpenCV with Python – 3"></a>OpenCV with Python – 3</h1><h2 id="Content"><a href="#Content" class="headerlink" title="Content"></a>Content</h2><blockquote class="blockquote-note blockquote-note__tip"><div class="blockquote-note__header"><div class="blockquote-note__icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></div>See more</div><div class="blockquote-note__content"><p>Back to <a href="/posts/6f57d1c0/">series page</a></p>
<ul>
<li><a href="/posts/55787255/">OpenCV with Python – 1</a></li>
<li><a href="/posts/cc7123ef/">OpenCV with Python – 2</a></li>
<li><a href="/posts/bb761379/">OpenCV with Python – 3</a></li>
<li><a href="/posts/251286da/">OpenCV with Python – 4</a></li>
<li><a href="/posts/5215b64c/">OpenCV with Python – 5</a></li>
</ul>
</div></blockquote>

<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In today’s tutorial, we’re going to talk about how to crop the image. Also, add additional infomation on the images such as lines, retangle and text. Furthermore, we ‘are going to know how to change the perspective of the image.</p>
<h2 id="Resize-and-crop"><a href="#Resize-and-crop" class="headerlink" title="Resize and crop"></a>Resize and crop</h2><p>We have already mentioned how to resize the image. However, in some special event, we want to random crop our image or crop the image at the center to get the specific information. </p>
<p>For example, when we train the classification model and want to improve the performance, we may try to do the random crop to get different kinds of images. (In fact, most of the deep learning library have built-in function to finish the job.)</p>
<p>Essentially put, image is a matrix will value in it. Therefore, if we want to crop the image, we can just focus on one part of the matrix and only get those values. The only thing should be noticed is the matrix was start from top-left corner.</p>
<center><img src=https://i.imgur.com/hYdL50V.jpg width=450/></center>

<ul>
<li><strong>Function in OpenCV</strong><pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2

img = cv2.imread(<span class="hljs-string">&quot;resources/food.jpg&quot;</span>)

<span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string"># Crop the image</span>
<span class="hljs-string">target region: (height, width)</span>
<span class="hljs-string">height pixel: 500~900</span>
<span class="hljs-string">width pixel: 300~1000</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>
img_cropped = img[<span class="hljs-number">500</span>:<span class="hljs-number">900</span>, <span class="hljs-number">300</span>:<span class="hljs-number">1000</span>]

<span class="hljs-comment"># Show the image</span>
cv2.imshow(<span class="hljs-string">&quot;Image&quot;</span>, img)
cv2.imshow(<span class="hljs-string">&quot;Cropped image&quot;</span>, img_cropped)

cv2.waitKey(<span class="hljs-number">0</span>)
cv2.destroyAllWindows()
cv2.waitKey(<span class="hljs-number">1</span>)</code></pre>
<center><img src=https://i.imgur.com/7nJCIm4.jpg width=450/></center>
<center><b>Origin image</b></center></br>

</li>
</ul>
<center><img src=https://i.imgur.com/4XChJqz.jpg width=250/></center>
<center><b>Cropped image</b></center>

<h2 id="Draw-on-the-image"><a href="#Draw-on-the-image" class="headerlink" title="Draw on the image"></a>Draw on the image</h2><p>We’re going to demonstrate how to use the function.</p>
<ul>
<li><p><strong>Circle</strong></p>
<ul>
<li><p><code>cv2.circle(img, origin, radius, color, thickness)</code></p>
<ul>
<li>img: Image to draw</li>
<li>origin: Pixel to be the origin.</li>
<li>radius: Radius of the circle.</li>
<li>color: Color of the circle. ==(RGB)==</li>
<li>thickness: Thickness of the circle. To fill the circle put <code>cv2.FILLED</code>.</br>
<pre><code class="hljs python"><span class="hljs-comment"># Example</span>
cv2.circle(img_cir, (<span class="hljs-number">250</span>, <span class="hljs-number">250</span>), <span class="hljs-number">100</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), <span class="hljs-number">3</span>)
cv2.circle(img_cir, (<span class="hljs-number">250</span>, <span class="hljs-number">250</span>), <span class="hljs-number">100</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), cv2.FILLED)</code></pre></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Rectangle</strong></p>
<ul>
<li><p><code>cv2.rectangle(img, upper_left, lower_right, color, thickness)</code></p>
<ul>
<li>img: Image to add rectangle.</li>
<li>upper_left: Top-left corner of the rectangle. ==(Place of the matrix)==</li>
<li>lower_right: Down-right corner of the rectangle. ==(Place of the matrix)==</li>
<li>color: Color of rectangle.</li>
<li>thickness: Thickness of rectangle. To fill the circle put <code>cv2.FILLED</code>.</br>
<pre><code class="hljs python"><span class="hljs-comment"># Example</span>
cv2.rectangle(img_rec, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">250</span>, <span class="hljs-number">350</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), <span class="hljs-number">3</span>)
cv2.rectangle(img_rec, (<span class="hljs-number">250</span>, <span class="hljs-number">350</span>), (<span class="hljs-number">250</span>, <span class="hljs-number">350</span>), (<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), cv2.FILLED)</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Line</strong></p>
<ul>
<li><p><code>cv2.line(img, start_point, end_point, color, thickness)</code></p>
<ul>
<li>img: Image to add line.</li>
<li>start_point: Position to start line. ==(Place of the matrix)==</li>
<li>end_point: Position to end line. ==(Place of the matrix)==</li>
<li>color: Color of line.</li>
<li>thickness: Thickness of line.</br>
<pre><code class="hljs python">cv2.line(img_line, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (img.shape[<span class="hljs-number">1</span>], img.shape[<span class="hljs-number">0</span>]), (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), <span class="hljs-number">3</span>)</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Text</strong></p>
<ul>
<li><p><code>cv2.putText(img, text, start_place, font type, scale, color, thickness)</code></p>
<ul>
<li>text: Text to be put on.</li>
<li>start_point: buttom-left corner of the text. ==(Place of the matrix)==</li>
<li>font type: The type of the text.</li>
<li>scale: Scale of the text.</br>
<pre><code class="hljs python">cv2.putText(img_text, <span class="hljs-string">&quot;OpenCV&quot;</span>, (<span class="hljs-number">300</span>, <span class="hljs-number">100</span>), 
            cv2.FONT_HERSHEY_COMPLEX, <span class="hljs-number">1</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>), <span class="hljs-number">3</span>)</code></pre>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Demostration</strong></p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string"># Create a black image</span>
<span class="hljs-string">0: black</span>
<span class="hljs-string">255: white</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>
img_black = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>), np.uint8)

<span class="hljs-comment"># Create color image, need 3 channels</span>
img_blue = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8)
img_blue[:] = [<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]

<span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string">Try out</span>
<span class="hljs-string">img_blue[200:300, 300, 400] = [255, 0, 0]</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>

<span class="hljs-comment"># Add green line</span>
img_line = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8)
cv2.line(img_line, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (img.shape[<span class="hljs-number">1</span>], img.shape[<span class="hljs-number">0</span>]), (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), <span class="hljs-number">3</span>)

<span class="hljs-comment">## Add rectangle</span>
img_rec = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8)
cv2.rectangle(img_rec, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">250</span>, <span class="hljs-number">350</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), <span class="hljs-number">3</span>)
cv2.rectangle(img_rec, (<span class="hljs-number">250</span>, <span class="hljs-number">350</span>), (img.shape[<span class="hljs-number">1</span>], img.shape[<span class="hljs-number">0</span>]), (<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), cv2.FILLED)

<span class="hljs-comment">## Add Circle</span>
img_cir = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8)
cv2.circle(img_cir, (<span class="hljs-number">250</span>, <span class="hljs-number">250</span>), <span class="hljs-number">100</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), cv2.FILLED)

<span class="hljs-comment">## Add Text</span>
img_text = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8)
cv2.putText(img_text, <span class="hljs-string">&quot;OpenCV&quot;</span>, (<span class="hljs-number">300</span>, <span class="hljs-number">100</span>), cv2.FONT_HERSHEY_COMPLEX, <span class="hljs-number">1</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>), <span class="hljs-number">3</span>)

<span class="hljs-comment"># Show the result</span>
cv2.imshow(<span class="hljs-string">&quot;Black image&quot;</span>, img_black)
cv2.imshow(<span class="hljs-string">&quot;Blue image&quot;</span>, img_blue)
cv2.imshow(<span class="hljs-string">&quot;Line&quot;</span>, img_line)
cv2.imshow(<span class="hljs-string">&quot;Rectangle&quot;</span>, img_rec)
cv2.imshow(<span class="hljs-string">&quot;Circle&quot;</span>, img_cir)
cv2.imshow(<span class="hljs-string">&quot;Text&quot;</span>, img_text)


cv2.waitKey(<span class="hljs-number">0</span>)
cv2.destroyAllWindows()
cv2.waitKey(<span class="hljs-number">1</span>)</code></pre>

<h2 id="Perspective"><a href="#Perspective" class="headerlink" title="Perspective"></a>Perspective</h2><p>To get the specific part of the image, we have to change the perspective of the image. For example, we have lots of pockers.</p>
<center><img src=https://i.imgur.com/KShrc4c.jpg width=300/></center>
</br>

<p>We only want to get the <strong>Ace</strong> in the image.</p>
<center><img src=https://i.imgur.com/nH4WtdI.jpg width=200/></center>
</br>

<p>Let’s see how we achieve the result. In order to change the perspective, we should first know all four vertexs of the target. After that, we have to determine the new size of the image. Then we can do the transform.<br><img src="https://i.imgur.com/68aExgZ.jpg"></p>
<p>You can use different application such as Photoshop or just the image viewer in your computer to find out the vertex. The order of <code>pst1</code>(in below code session) doesn’t matter. However, you should be aware the order of <code>pst2</code> should have the right transformation w.r.t. <code>pst1</code>.</p>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">&quot;resources/pocker.jpg&quot;</span>)

cv2.imshow(<span class="hljs-string">&quot;Image&quot;</span>, img)

<span class="hljs-comment"># New size of the output</span>
width, height = <span class="hljs-number">250</span>, <span class="hljs-number">350</span>

<span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string">pst1: old position</span>
<span class="hljs-string">pst2: new position </span>
<span class="hljs-string">transform pst1 -&gt; pst2</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>
pts1 = np.float32([[<span class="hljs-number">239</span>, <span class="hljs-number">103</span>], [<span class="hljs-number">356</span>, <span class="hljs-number">146</span>], [<span class="hljs-number">179</span>, <span class="hljs-number">277</span>], [<span class="hljs-number">296</span>, <span class="hljs-number">320</span>]])
pts2 = np.float32([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [width, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, height], [width, height]])

<span class="hljs-comment"># Transformation matrix</span>
matrix = cv2.getPerspectiveTransform(pts1, pts2)

<span class="hljs-comment"># Get the new image</span>
img_output = cv2.warpPerspective(img, matrix, (width, height))

cv2.imshow(<span class="hljs-string">&quot;New image&quot;</span>, img_output)

cv2.waitKey(<span class="hljs-number">0</span>)
cv2.destroyAllWindows()
cv2.waitKey(<span class="hljs-number">1</span>)</code></pre>

<p>Try to break the correct transformation or change the order to see the result by yourself! </br><br>For instance:</p>
<pre><code class="hljs python"><span class="hljs-comment"># Break the correct transformation</span>
pts1 = np.float32([[<span class="hljs-number">356</span>, <span class="hljs-number">146</span>], [<span class="hljs-number">239</span>, <span class="hljs-number">103</span>], [<span class="hljs-number">179</span>, <span class="hljs-number">277</span>], [<span class="hljs-number">296</span>, <span class="hljs-number">320</span>]])
pts2 = np.float32([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [width, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, height], [width, height]])

<span class="hljs-comment">#-------------------#</span>

<span class="hljs-comment"># Change the order but still with right transformation</span>
pts1 = np.float32([[<span class="hljs-number">356</span>, <span class="hljs-number">146</span>], [<span class="hljs-number">239</span>, <span class="hljs-number">103</span>], [<span class="hljs-number">179</span>, <span class="hljs-number">277</span>], [<span class="hljs-number">296</span>, <span class="hljs-number">320</span>]])
pts2 = np.float32([[width, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, height], [width, height]])</code></pre>

<h2 id="Join-the-image"><a href="#Join-the-image" class="headerlink" title="Join the image"></a>Join the image</h2><p>To show different kinds of images in one result or feel tedious to type <code>cv2.imshow(...)</code> we can stack the images together.</p>
<ul>
<li><p><code>np.hstack()</code></p>
<p>  We use numpy function to stack the image. You can make a list of images to be the input. </br></br></p>
  <pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">&quot;resources/food.jpg&quot;</span>)

<span class="hljs-comment"># horizotal stack</span>
img_hor = np.hstack((img, img))

<span class="hljs-comment"># Show the result</span>
cv2.imshow(<span class="hljs-string">&quot;Horizontal image&quot;</span>, img_hor)

cv2.waitKey(<span class="hljs-number">0</span>)
cv2.destroyAllWindows()
cv2.waitKey(<span class="hljs-number">1</span>)</code></pre>
  <center><img src=https://i.imgur.com/Kw85NL3.jpg width=500/></center>
</li>
<li><p><code>np.vstack()</code></p>
<p>  Same as <code>np.hstack()</code>, but with the vertical result.</p>
  <pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">&quot;resources/food.jpg&quot;</span>)

<span class="hljs-comment"># Vertival stack</span>
img_ver = np.vstack((img, img))

<span class="hljs-comment"># Show the result</span>
cv2.imshow(<span class="hljs-string">&quot;Vertical image&quot;</span>, img_ver)

cv2.waitKey(<span class="hljs-number">0</span>)
cv2.destroyAllWindows()
cv2.waitKey(<span class="hljs-number">1</span>)</code></pre>
  <center><img src=https://i.imgur.com/294x66t.jpg height=450/></center>
</li>
<li><p><strong>Self-define function</strong></p>
<p>  To first scale the image and stack the images with multilayers, we can write our own function. ==The code below is came from <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.murtazahassan.com/learn-opencv-in-3-hours-chapter-6/">MURTAZA’S WORKSHOP</a>.==</p>
  <pre><code class="hljs python"><span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string">The code below came from MURTAZA&#x27;S WORKSHOP</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">stackImages</span>(<span class="hljs-params">scale, imgArray</span>):</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>
<span class="hljs-string">scale: New scale of the image</span>
<span class="hljs-string">imgArray: Images to stack.</span>
<span class="hljs-string">&#x27;&#x27;&#x27;</span>

rows = len(imgArray)
cols = len(imgArray[<span class="hljs-number">0</span>])

<span class="hljs-comment"># Check whether we have multilayers</span>
rowsAvailable = isinstance(imgArray[<span class="hljs-number">0</span>], list)

width = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>]
height = imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]

<span class="hljs-keyword">if</span> rowsAvailable:
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range (<span class="hljs-number">0</span>, rows):
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, cols):
            <span class="hljs-keyword">if</span> imgArray[x][y].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:
                imgArray[x][y] = cv2.resize(imgArray[x][y], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)
            <span class="hljs-keyword">else</span>:
                imgArray[x][y] = cv2.resize(imgArray[x][y], (imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>, scale, scale)
                
            <span class="hljs-keyword">if</span> len(imgArray[x][y].shape) == <span class="hljs-number">2</span>: 
                imgArray[x][y]= cv2.cvtColor(imgArray[x][y], cv2.COLOR_GRAY2BGR)
                
    imageBlank = np.zeros((height, width, <span class="hljs-number">3</span>), np.uint8)
    
    hor = [imageBlank] * rows
    
    <span class="hljs-comment"># First put each horizontal image to its horizontal place</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, rows):
        hor[x] = np.hstack(imgArray[x])
    
    <span class="hljs-comment"># Stack each array to the vertical format</span>
    ver = np.vstack(hor)
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, rows):
        <span class="hljs-keyword">if</span> imgArray[x].shape[:<span class="hljs-number">2</span>] == imgArray[<span class="hljs-number">0</span>].shape[:<span class="hljs-number">2</span>]:
            imgArray[x] = cv2.resize(imgArray[x], (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-literal">None</span>, scale, scale)
        <span class="hljs-keyword">else</span>:
            imgArray[x] = cv2.resize(imgArray[x], (imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">1</span>], imgArray[<span class="hljs-number">0</span>].shape[<span class="hljs-number">0</span>]), <span class="hljs-literal">None</span>,scale, scale)
            
        <span class="hljs-keyword">if</span> len(imgArray[x].shape) == <span class="hljs-number">2</span>: 
            imgArray[x] = cv2.cvtColor(imgArray[x], cv2.COLOR_GRAY2BGR)
            
    hor = np.hstack(imgArray)
    ver = hor
    
<span class="hljs-keyword">return</span> ver</code></pre>
  <pre><code class="hljs python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">&#x27;resources/beauty.jpg&#x27;</span>)
img_gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)

<span class="hljs-comment"># Stack image</span>
img_stack = stackImages(<span class="hljs-number">0.5</span>, [[img, img_gray, img],[img, img, img]])

<span class="hljs-comment"># Show the image</span>
cv2.imshow(<span class="hljs-string">&quot;ImageStack&quot;</span>,img_stack)

cv2.waitKey(<span class="hljs-number">0</span>)
cv2.destroyAllWindows()
cv2.waitKey(<span class="hljs-number">1</span>)</code></pre>
  <center><img src=https://i.imgur.com/OG3q7DP.jpg width=500/></center>

</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.murtazahassan.com/learn-opencv-in-3-hours-chapter-6/">MURTAZA’S WORKSHOP</a></li>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://youtu.be/WQeoO7MI0Bs">LEARN OPENCV in 3 HOURS with Python (2020)</a></li>
</ol>
<!-- flag of hidden posts -->
    </div>
     
    <div class="post-footer__meta"><p>updated at 2021-01-01</p></div> 
    <div class="post-meta__cats"></div> 
</article>




    <div class="post__comments content-card" id="comment">
        
    <h4>Comments</h4>
    
    <div id="disqus_thread">Unable to load Disqus, please make sure your network can access.</div>

    
    
    
    
    
    
    
    
    


    </div>



</main>

            <footer class="footer">
    
        <script src='https://cdnjs.cloudflare.com/ajax/libs/viz.js/1.7.1/viz.js'></script>
        <script>
          String.prototype.replaceAll = function(search, replacement) {
            var target = this;
            return target.split(search).join(replacement);
          };
      
          let vizObjects = document.querySelectorAll('.graphviz')
      
          for (let item of vizObjects) {
            let svg = undefined
            try {
              svg = Viz(item.textContent.replaceAll('–', '--'), 'svg')
            } catch(e) {
              svg = `<pre class="error">${e}</pre>`
            }
            item.outerHTML = svg
          }
        </script>
    
    


    
     
 

 
    
        
        <p class="footer-copyright">
            Copyright © 2021 <a href="/">Justin website for sharing knowledge and getting idea.</a>
        </p>
    
    
    <p>Powered by <a href="https://hexo.io" rel="external nofollow noreferrer" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" rel="external nofollow noreferrer" target="_blank">Cards</a></p>
</footer>

        </div>
         

 
    <script>
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'G-4FZNQ241GW', 'auto');
        ga('send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
 

 

 

  



 


    
 

 

 

 

 


    
    <script>
        function loadComment() {
            window.disqus_config = function () {
                this.page.url = 'justin900429.github.io/posts/bb761379/';
                this.page.identifier = 'posts/bb761379/';
            };
            (function(){
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + 'https-justin900429-github-io' + '.disqus.com/embed.js';
                (document.head || document.body).appendChild(dsq);
            })();
        }
    
        var runningOnBrowser = typeof window !== "undefined";
        var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
        var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;
    
        setTimeout(function () {
            if (!isBot && supportsIntersectionObserver) {
                var comment_observer = new IntersectionObserver(function(entries) {
                    if (entries[0].isIntersecting) {
                        loadComment();
                        comment_observer.disconnect();
                    }
                }, { threshold: [0] });
                comment_observer.observe(document.getElementById('comment'));
            } else {
                loadComment();
            }
        }, 1);
    </script>


    
    
    

    
    
    
    
    

    
    
    
    
    

    



    </body>
</html>
